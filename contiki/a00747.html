<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Contiki 3.x: core/net/ipv6/multicast/roll-tm.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki 3.x
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li><li class="navelem"><a class="el" href="dir_397e3e282a3f6c72eba45d18c4a175d7.html">net</a></li><li class="navelem"><a class="el" href="dir_2254bc981389a9495bd721183ae93a8d.html">ipv6</a></li><li class="navelem"><a class="el" href="dir_30f027f9ee303e3cf4f79ee531cc4eae.html">multicast</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">roll-tm.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><pre class="fragment">    This file implements IPv6 MCAST forwarding according to the
    algorithm described in the "MCAST Forwarding Using Trickle"
    internet draft.</pre>  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;contiki.h&quot;</code><br/>
<code>#include &quot;contiki-lib.h&quot;</code><br/>
<code>#include &quot;contiki-net.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00766_source.html">net/ipv6/uip-icmp6.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00756_source.html">net/ipv6/multicast/uip-mcast6.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00748_source.html">net/ipv6/multicast/roll-tm.h</a>&quot;</code><br/>
<code>#include &quot;dev/watchdog.h&quot;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="a00694_source.html">net/ip/uip-debug.h</a>&quot;</code><br/>
</div>
<p><a href="a00747_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a863f074d10ff4a61639555ae661a5892"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a863f074d10ff4a61639555ae661a5892"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a863f074d10ff4a61639555ae661a5892">TRICKLE_TIME</a>(m, d)&#160;&#160;&#160;((clock_time_t)((m) &lt;&lt; (d)))</td></tr>
<tr class="memdesc:a863f074d10ff4a61639555ae661a5892"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a timer to a sane clock_time_t value after d doublings m is a value of Imin, d is a number of doublings Careful of overflows. <br/></td></tr>
<tr class="separator:a863f074d10ff4a61639555ae661a5892"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae471e71c10f0fc7149d69e1328cb6f2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#ae471e71c10f0fc7149d69e1328cb6f2d">TRICKLE_IMAX</a>(t)&#160;&#160;&#160;((uint32_t)((t)-&gt;i_min &lt;&lt; (t)-&gt;i_max))</td></tr>
<tr class="memdesc:ae471e71c10f0fc7149d69e1328cb6f2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert Imax from number of doublings to clock_time_t units for trickle_param t.  <a href="#ae471e71c10f0fc7149d69e1328cb6f2d">More...</a><br/></td></tr>
<tr class="separator:ae471e71c10f0fc7149d69e1328cb6f2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6f3d0f24efd805b71aaaf7351eb704f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae6f3d0f24efd805b71aaaf7351eb704f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#ae6f3d0f24efd805b71aaaf7351eb704f">TRICKLE_ACTIVE</a>(t)&#160;&#160;&#160;((uint32_t)(<a class="el" href="a00747.html#ae471e71c10f0fc7149d69e1328cb6f2d">TRICKLE_IMAX</a>(t) * t-&gt;t_active))</td></tr>
<tr class="memdesc:ae6f3d0f24efd805b71aaaf7351eb704f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert Tactive for a trickle timer to a sane clock_time_t value t is a pointer to the timer Careful of overflows. <br/></td></tr>
<tr class="separator:ae6f3d0f24efd805b71aaaf7351eb704f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87563ab11b0056134de451433a08cafb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a87563ab11b0056134de451433a08cafb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a87563ab11b0056134de451433a08cafb">TRICKLE_DWELL</a>(t)&#160;&#160;&#160;((uint32_t)(<a class="el" href="a00747.html#ae471e71c10f0fc7149d69e1328cb6f2d">TRICKLE_IMAX</a>(t) * t-&gt;t_dwell))</td></tr>
<tr class="memdesc:a87563ab11b0056134de451433a08cafb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert Tdwell for a trickle timer to a sane clock_time_t value t is a pointer to the timer Careful of overflows. <br/></td></tr>
<tr class="separator:a87563ab11b0056134de451433a08cafb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a9ab2bd3b3da9bc98eb2063d07ac373"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a9ab2bd3b3da9bc98eb2063d07ac373"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a1a9ab2bd3b3da9bc98eb2063d07ac373">SUPPRESSION_ENABLED</a>(t)&#160;&#160;&#160;((t)-&gt;k != ROLL_TM_INFINITE_REDUNDANCY)</td></tr>
<tr class="memdesc:a1a9ab2bd3b3da9bc98eb2063d07ac373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if suppression is enabled for trickle_param t t is a pointer to the timer. <br/></td></tr>
<tr class="separator:a1a9ab2bd3b3da9bc98eb2063d07ac373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e4539f472ea79bb885f07b6734300d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37e4539f472ea79bb885f07b6734300d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a37e4539f472ea79bb885f07b6734300d">SUPPRESSION_DISABLED</a>(t)&#160;&#160;&#160;((t)-&gt;k == ROLL_TM_INFINITE_REDUNDANCY)</td></tr>
<tr class="memdesc:a37e4539f472ea79bb885f07b6734300d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if suppression is disabled for trickle_param t t is a pointer to the timer. <br/></td></tr>
<tr class="separator:a37e4539f472ea79bb885f07b6734300d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18c9d997f4ba63c2247aeefa1e73bf3d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a18c9d997f4ba63c2247aeefa1e73bf3d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a18c9d997f4ba63c2247aeefa1e73bf3d">TIMER_CONFIGURE</a>(m)</td></tr>
<tr class="memdesc:a18c9d997f4ba63c2247aeefa1e73bf3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init <a class="el" href="a00194.html" title="A trickle timer. ">trickle_timer</a>[m]. <br/></td></tr>
<tr class="separator:a18c9d997f4ba63c2247aeefa1e73bf3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896fcd2818b448b9aa37580f3292e0d0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a896fcd2818b448b9aa37580f3292e0d0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a896fcd2818b448b9aa37580f3292e0d0">SEQ_VAL_IS_EQ</a>(i1, i2)&#160;&#160;&#160;((i1) == (i2))</td></tr>
<tr class="memdesc:a896fcd2818b448b9aa37580f3292e0d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">s1 is said to be equal s2 iif <a class="el" href="a00747.html#a896fcd2818b448b9aa37580f3292e0d0" title="s1 is said to be equal s2 iif SEQ_VAL_IS_EQ(s1, s2) == 1 ">SEQ_VAL_IS_EQ(s1, s2)</a> == 1 <br/></td></tr>
<tr class="separator:a896fcd2818b448b9aa37580f3292e0d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64d3cabe0ab044f77ea518742c7cda70"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64d3cabe0ab044f77ea518742c7cda70"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a64d3cabe0ab044f77ea518742c7cda70">SEQ_VAL_IS_LT</a>(i1, i2)</td></tr>
<tr class="memdesc:a64d3cabe0ab044f77ea518742c7cda70"><td class="mdescLeft">&#160;</td><td class="mdescRight">s1 is said to be less than s2 iif <a class="el" href="a00747.html#a64d3cabe0ab044f77ea518742c7cda70" title="s1 is said to be less than s2 iif SEQ_VAL_IS_LT(s1, s2) == 1 ">SEQ_VAL_IS_LT(s1, s2)</a> == 1 <br/></td></tr>
<tr class="separator:a64d3cabe0ab044f77ea518742c7cda70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc223143263562875019dbe17b4fe424"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acc223143263562875019dbe17b4fe424"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#acc223143263562875019dbe17b4fe424">SEQ_VAL_IS_GT</a>(i1, i2)</td></tr>
<tr class="memdesc:acc223143263562875019dbe17b4fe424"><td class="mdescLeft">&#160;</td><td class="mdescRight">s1 is said to be greater than s2 iif <a class="el" href="a00747.html#a64d3cabe0ab044f77ea518742c7cda70" title="s1 is said to be less than s2 iif SEQ_VAL_IS_LT(s1, s2) == 1 ">SEQ_VAL_IS_LT(s1, s2)</a> == 1 <br/></td></tr>
<tr class="separator:acc223143263562875019dbe17b4fe424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48ef029522bcb8f65bfd9faf467ac894"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48ef029522bcb8f65bfd9faf467ac894"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a48ef029522bcb8f65bfd9faf467ac894">SEQ_VAL_ADD</a>(s, n)&#160;&#160;&#160;(((s) + (n)) % 0x8000)</td></tr>
<tr class="memdesc:a48ef029522bcb8f65bfd9faf467ac894"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add n to s: (s + n) modulo (2 ^ SERIAL_BITS) =&gt; ((s + n) % 0x8000) <br/></td></tr>
<tr class="separator:a48ef029522bcb8f65bfd9faf467ac894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ae2eb41469fbef3a0680dfcbdaffd56"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ae2eb41469fbef3a0680dfcbdaffd56"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a0ae2eb41469fbef3a0680dfcbdaffd56">SLIDING_WINDOW_IS_USED</a>(w)&#160;&#160;&#160;((w)-&gt;flags &amp; SLIDING_WINDOW_U_BIT)</td></tr>
<tr class="memdesc:a0ae2eb41469fbef3a0680dfcbdaffd56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is Occupied sliding window location w w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:a0ae2eb41469fbef3a0680dfcbdaffd56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c73c41649890a2623c0c2b49131ce42"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c73c41649890a2623c0c2b49131ce42"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a6c73c41649890a2623c0c2b49131ce42">SLIDING_WINDOW_IS_USED_SET</a>(w)&#160;&#160;&#160;((w)-&gt;flags |= SLIDING_WINDOW_U_BIT)</td></tr>
<tr class="memdesc:a6c73c41649890a2623c0c2b49131ce42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set 'Is Used' bit for window w w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:a6c73c41649890a2623c0c2b49131ce42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02cf3b59bd03f21204cd0539ae9a0ff0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a02cf3b59bd03f21204cd0539ae9a0ff0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a02cf3b59bd03f21204cd0539ae9a0ff0">SLIDING_WINDOW_IS_USED_CLR</a>(w)&#160;&#160;&#160;((w)-&gt;flags &amp;= ~SLIDING_WINDOW_U_BIT)</td></tr>
<tr class="memdesc:a02cf3b59bd03f21204cd0539ae9a0ff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear 'Is Used' bit for window w w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:a02cf3b59bd03f21204cd0539ae9a0ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa4058ad68dc5bccd541ea7e796e5c52"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa4058ad68dc5bccd541ea7e796e5c52"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#aaa4058ad68dc5bccd541ea7e796e5c52">SLIDING_WINDOW_LISTED_SET</a>(w)&#160;&#160;&#160;((w)-&gt;flags |= SLIDING_WINDOW_L_BIT)</td></tr>
<tr class="memdesc:aaa4058ad68dc5bccd541ea7e796e5c52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set 'Is Seen' bit for window w w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:aaa4058ad68dc5bccd541ea7e796e5c52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a486971096ad8b48b7a816bf0420a7ac2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a486971096ad8b48b7a816bf0420a7ac2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a486971096ad8b48b7a816bf0420a7ac2">SLIDING_WINDOW_LISTED_CLR</a>(w)&#160;&#160;&#160;((w)-&gt;flags &amp;= ~SLIDING_WINDOW_L_BIT)</td></tr>
<tr class="memdesc:a486971096ad8b48b7a816bf0420a7ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear 'Is Seen' bit for window w w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:a486971096ad8b48b7a816bf0420a7ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9b297da5fee2f8bee29526701b002d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1b9b297da5fee2f8bee29526701b002d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a1b9b297da5fee2f8bee29526701b002d">SLIDING_WINDOW_IS_LISTED</a>(w)&#160;&#160;&#160;((w)-&gt;flags &amp; SLIDING_WINDOW_L_BIT)</td></tr>
<tr class="memdesc:a1b9b297da5fee2f8bee29526701b002d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the sliding window at location w listed in current ICMP message? w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:a1b9b297da5fee2f8bee29526701b002d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b2549dde1834388c3266019f2759f35"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1b2549dde1834388c3266019f2759f35"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a1b2549dde1834388c3266019f2759f35">SLIDING_WINDOW_M_SET</a>(w)&#160;&#160;&#160;((w)-&gt;flags |= SLIDING_WINDOW_M_BIT)</td></tr>
<tr class="memdesc:a1b2549dde1834388c3266019f2759f35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set M bit for window w w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:a1b2549dde1834388c3266019f2759f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac33fe42c8c0eafbf3a5e244b61d65cd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aac33fe42c8c0eafbf3a5e244b61d65cd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#aac33fe42c8c0eafbf3a5e244b61d65cd">SLIDING_WINDOW_M_CLR</a>(w)&#160;&#160;&#160;((w)-&gt;flags &amp;= ~SLIDING_WINDOW_M_BIT)</td></tr>
<tr class="memdesc:aac33fe42c8c0eafbf3a5e244b61d65cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear M bit for window w w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:aac33fe42c8c0eafbf3a5e244b61d65cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae191f18917a2d188bca778b2069d317b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae191f18917a2d188bca778b2069d317b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#ae191f18917a2d188bca778b2069d317b">SLIDING_WINDOW_GET_M</a>(w)&#160;&#160;&#160;((uint8_t)(((w)-&gt;flags &amp; SLIDING_WINDOW_M_BIT) == SLIDING_WINDOW_M_BIT))</td></tr>
<tr class="memdesc:ae191f18917a2d188bca778b2069d317b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve trickle parametrization for sliding window at location w w: pointer to a sliding window. <br/></td></tr>
<tr class="separator:ae191f18917a2d188bca778b2069d317b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63e91ef221b27324e37c662337e753c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63e91ef221b27324e37c662337e753c4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a63e91ef221b27324e37c662337e753c4">MCAST_PACKET_TTL</a>(p)&#160;&#160;&#160;(((struct uip_ip_hdr *)(p)-&gt;buff)-&gt;ttl)</td></tr>
<tr class="memdesc:a63e91ef221b27324e37c662337e753c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the TTL of a buffered packet p: pointer to a packet buffer. <br/></td></tr>
<tr class="separator:a63e91ef221b27324e37c662337e753c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429f7e031072c918a1242709dce8a562"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a429f7e031072c918a1242709dce8a562"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a429f7e031072c918a1242709dce8a562">MCAST_PACKET_USED_SET</a>(p)&#160;&#160;&#160;((p)-&gt;flags |= MCAST_PACKET_U_BIT)</td></tr>
<tr class="memdesc:a429f7e031072c918a1242709dce8a562"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set 'Is Used' bit for packet p p: pointer to a packet buffer. <br/></td></tr>
<tr class="separator:a429f7e031072c918a1242709dce8a562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a986fc4b34f769e8feebd0fb8eb0ee70f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a986fc4b34f769e8feebd0fb8eb0ee70f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a986fc4b34f769e8feebd0fb8eb0ee70f">MCAST_PACKET_USED_CLR</a>(p)&#160;&#160;&#160;((p)-&gt;flags &amp;= ~MCAST_PACKET_U_BIT)</td></tr>
<tr class="memdesc:a986fc4b34f769e8feebd0fb8eb0ee70f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear 'Is Used' bit for packet p p: pointer to a packet buffer. <br/></td></tr>
<tr class="separator:a986fc4b34f769e8feebd0fb8eb0ee70f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d630062a1c438c2ea3f159ce73837c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d630062a1c438c2ea3f159ce73837c4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a2d630062a1c438c2ea3f159ce73837c4">MCAST_PACKET_IS_USED</a>(p)&#160;&#160;&#160;((p)-&gt;flags &amp; MCAST_PACKET_U_BIT)</td></tr>
<tr class="memdesc:a2d630062a1c438c2ea3f159ce73837c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is Occupied buffer location p. <br/></td></tr>
<tr class="separator:a2d630062a1c438c2ea3f159ce73837c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf6a5208f22741e50a58df3ccccbac2f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf6a5208f22741e50a58df3ccccbac2f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#abf6a5208f22741e50a58df3ccccbac2f">MCAST_PACKET_MUST_SEND</a>(p)&#160;&#160;&#160;((p)-&gt;flags &amp; MCAST_PACKET_S_BIT)</td></tr>
<tr class="memdesc:abf6a5208f22741e50a58df3ccccbac2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Must we send this message this pass? <br/></td></tr>
<tr class="separator:abf6a5208f22741e50a58df3ccccbac2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0479441e9f8281dfa0bdc0de326daa2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0479441e9f8281dfa0bdc0de326daa2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#ad0479441e9f8281dfa0bdc0de326daa2">MCAST_PACKET_SEND_SET</a>(p)&#160;&#160;&#160;((p)-&gt;flags |= MCAST_PACKET_S_BIT)</td></tr>
<tr class="memdesc:ad0479441e9f8281dfa0bdc0de326daa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set 'Must Send' bit for message p p: pointer to a struct mcast_packet. <br/></td></tr>
<tr class="separator:ad0479441e9f8281dfa0bdc0de326daa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744cfc5402b67487f568abc30780fb2c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a744cfc5402b67487f568abc30780fb2c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a744cfc5402b67487f568abc30780fb2c">MCAST_PACKET_SEND_CLR</a>(p)&#160;&#160;&#160;((p)-&gt;flags &amp;= ~MCAST_PACKET_S_BIT)</td></tr>
<tr class="memdesc:a744cfc5402b67487f568abc30780fb2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear 'Must Send' bit for message p p: pointer to a struct mcast_packet. <br/></td></tr>
<tr class="separator:a744cfc5402b67487f568abc30780fb2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceb7137a74c39124e42fc6ac3592d777"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aceb7137a74c39124e42fc6ac3592d777"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#aceb7137a74c39124e42fc6ac3592d777">MCAST_PACKET_IS_LISTED</a>(p)&#160;&#160;&#160;((p)-&gt;flags &amp; MCAST_PACKET_L_BIT)</td></tr>
<tr class="memdesc:aceb7137a74c39124e42fc6ac3592d777"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the message p listed in current ICMP message? p: pointer to a struct mcast_packet. <br/></td></tr>
<tr class="separator:aceb7137a74c39124e42fc6ac3592d777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93d47133c5535030ca0349f32f31299e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a93d47133c5535030ca0349f32f31299e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a93d47133c5535030ca0349f32f31299e">MCAST_PACKET_LISTED_SET</a>(p)&#160;&#160;&#160;((p)-&gt;flags |= MCAST_PACKET_L_BIT)</td></tr>
<tr class="memdesc:a93d47133c5535030ca0349f32f31299e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set 'Is Listed' bit for message p p: pointer to a struct mcast_packet. <br/></td></tr>
<tr class="separator:a93d47133c5535030ca0349f32f31299e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f47320b6dc4db4ed72c9d49ab3eb632"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f47320b6dc4db4ed72c9d49ab3eb632"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a3f47320b6dc4db4ed72c9d49ab3eb632">MCAST_PACKET_LISTED_CLR</a>(p)&#160;&#160;&#160;((p)-&gt;flags &amp;= ~MCAST_PACKET_L_BIT)</td></tr>
<tr class="memdesc:a3f47320b6dc4db4ed72c9d49ab3eb632"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear 'Is Listed' bit for message p p: pointer to a struct mcast_packet. <br/></td></tr>
<tr class="separator:a3f47320b6dc4db4ed72c9d49ab3eb632"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9694b10ab1a8a68c955bef13669318a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9694b10ab1a8a68c955bef13669318a8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a9694b10ab1a8a68c955bef13669318a8">MCAST_PACKET_FREE</a>(p)&#160;&#160;&#160;((p)-&gt;flags = 0)</td></tr>
<tr class="memdesc:a9694b10ab1a8a68c955bef13669318a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a multicast packet buffer p: pointer to a struct mcast_packet. <br/></td></tr>
<tr class="separator:a9694b10ab1a8a68c955bef13669318a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4b933b968fa7e56cab56ef8ca36371a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4b933b968fa7e56cab56ef8ca36371a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#ab4b933b968fa7e56cab56ef8ca36371a">SEQUENCE_LIST_GET_M</a>(l)&#160;&#160;&#160;((uint8_t)(((l)-&gt;flags &amp; SEQUENCE_LIST_M_BIT) == SEQUENCE_LIST_M_BIT))</td></tr>
<tr class="memdesc:ab4b933b968fa7e56cab56ef8ca36371a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Trickle Parametrization for an ICMPv6 sequence list l: pointer to a sequence list structure. <br/></td></tr>
<tr class="separator:ab4b933b968fa7e56cab56ef8ca36371a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ead4e37850cc9d00b092f53a75ef4e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5ead4e37850cc9d00b092f53a75ef4e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#ab5ead4e37850cc9d00b092f53a75ef4e">SEQUENCE_LIST_GET_S</a>(l)&#160;&#160;&#160;((uint8_t)(((l)-&gt;flags &amp; SEQUENCE_LIST_S_BIT) == SEQUENCE_LIST_S_BIT))</td></tr>
<tr class="memdesc:ab5ead4e37850cc9d00b092f53a75ef4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Seed ID Length for an ICMPv6 sequence list l: pointer to a sequence list structure. <br/></td></tr>
<tr class="separator:ab5ead4e37850cc9d00b092f53a75ef4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30b96915bff7bcccda7319c2f9507302"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a30b96915bff7bcccda7319c2f9507302"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a30b96915bff7bcccda7319c2f9507302">HBH_GET_M</a>(h)&#160;&#160;&#160;(((h)-&gt;flags &amp; 0x80) == 0x80)</td></tr>
<tr class="memdesc:a30b96915bff7bcccda7319c2f9507302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Trickle Parametrization for a multicast HBHO header m: pointer to the HBHO header. <br/></td></tr>
<tr class="separator:a30b96915bff7bcccda7319c2f9507302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef688f5b2f02fe06a885906aab9966db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef688f5b2f02fe06a885906aab9966db"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#aef688f5b2f02fe06a885906aab9966db">HBH_SET_M</a>(h)&#160;&#160;&#160;((h)-&gt;flags |= 0x80)</td></tr>
<tr class="memdesc:aef688f5b2f02fe06a885906aab9966db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Trickle Parametrization bit for a multicast HBHO header m: pointer to the HBHO header. <br/></td></tr>
<tr class="separator:aef688f5b2f02fe06a885906aab9966db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4927f2184f2d14e4b87107a7d1e48dd6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4927f2184f2d14e4b87107a7d1e48dd6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00747.html#a4927f2184f2d14e4b87107a7d1e48dd6">HBH_GET_SV_MSB</a>(h)&#160;&#160;&#160;((h)-&gt;flags &amp; 0x7F)</td></tr>
<tr class="memdesc:a4927f2184f2d14e4b87107a7d1e48dd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the Sequence Value MSB from a multicast HBHO header m: pointer to the HBHO header. <br/></td></tr>
<tr class="separator:a4927f2184f2d14e4b87107a7d1e48dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">    This file implements IPv6 MCAST forwarding according to the
    algorithm described in the "MCAST Forwarding Using Trickle"
    internet draft.</pre> <pre class="fragment">    The current version of the draft can always be found in
    http://tools.ietf.org/html/draft-ietf-roll-trickle-mcast

    This implementation is based on the draft version stored in
    ROLL_TM_VER
</pre><dl class="section author"><dt>Author</dt><dd>George Oikonomou - <a href="#" onclick="location.href='mai'+'lto:'+'oik'+'on'+'omo'+'u@'+'use'+'rs'+'.so'+'ur'+'cef'+'or'+'ge.'+'ne'+'t'; return false;">oikon<span style="display: none;">.nosp@m.</span>omou<span style="display: none;">.nosp@m.</span>@user<span style="display: none;">.nosp@m.</span>s.so<span style="display: none;">.nosp@m.</span>urcef<span style="display: none;">.nosp@m.</span>orge<span style="display: none;">.nosp@m.</span>.net</a> </dd></dl>

<p>Definition in file <a class="el" href="a00747_source.html">roll-tm.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ae471e71c10f0fc7149d69e1328cb6f2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRICKLE_IMAX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">t</td><td>)</td>
          <td>&#160;&#160;&#160;((uint32_t)((t)-&gt;i_min &lt;&lt; (t)-&gt;i_max))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert Imax from number of doublings to clock_time_t units for trickle_param t. </p>
<p>Again, watch out for overflows </p>

<p>Definition at line <a class="el" href="a00747_source.html#l00118">118</a> of file <a class="el" href="a00747_source.html">roll-tm.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Nov 30 2014 09:59:00 for Contiki 3.x by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
