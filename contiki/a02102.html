<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Contiki 3.x: A service registration and diseemination hack</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki 3.x
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">A service registration and diseemination hack<div class="ingroups"><a class="el" href="a02323.html">Applications</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This application is a quick'n'dirty hack for registering, disseminating, and looking up services.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabef71690646b8e6eebafc9e3d606d15d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02102.html#gabef71690646b8e6eebafc9e3d606d15d">servreg_hack_init</a> (void)</td></tr>
<tr class="memdesc:gabef71690646b8e6eebafc9e3d606d15d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize and start the servreg-hack application.  <a href="#gabef71690646b8e6eebafc9e3d606d15d">More...</a><br/></td></tr>
<tr class="separator:gabef71690646b8e6eebafc9e3d606d15d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa701fca1c0fc599727823984af573d47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02102.html#gaa701fca1c0fc599727823984af573d47">servreg_hack_register</a> (servreg_hack_id_t service_id, const uip_ipaddr_t *addr)</td></tr>
<tr class="memdesc:gaa701fca1c0fc599727823984af573d47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register that this node provides a service.  <a href="#gaa701fca1c0fc599727823984af573d47">More...</a><br/></td></tr>
<tr class="separator:gaa701fca1c0fc599727823984af573d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae25c571b28dac133c74c41347b225b30"><td class="memItemLeft" align="right" valign="top">servreg_hack_item_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02102.html#gae25c571b28dac133c74c41347b225b30">servreg_hack_list_head</a> (void)</td></tr>
<tr class="memdesc:gae25c571b28dac133c74c41347b225b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the list of services provided by neighbors.  <a href="#gae25c571b28dac133c74c41347b225b30">More...</a><br/></td></tr>
<tr class="separator:gae25c571b28dac133c74c41347b225b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c40865ba46488d455fa4fb211da35cd"><td class="memItemLeft" align="right" valign="top">servreg_hack_id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02102.html#ga7c40865ba46488d455fa4fb211da35cd">servreg_hack_item_id</a> (servreg_hack_item_t *item)</td></tr>
<tr class="memdesc:ga7c40865ba46488d455fa4fb211da35cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the service ID for a list item.  <a href="#ga7c40865ba46488d455fa4fb211da35cd">More...</a><br/></td></tr>
<tr class="separator:ga7c40865ba46488d455fa4fb211da35cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf45c311a060847455c9667f89620a555"><td class="memItemLeft" align="right" valign="top">uip_ipaddr_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02102.html#gaf45c311a060847455c9667f89620a555">servreg_hack_item_address</a> (servreg_hack_item_t *item)</td></tr>
<tr class="memdesc:gaf45c311a060847455c9667f89620a555"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the IP address for a list item.  <a href="#gaf45c311a060847455c9667f89620a555">More...</a><br/></td></tr>
<tr class="separator:gaf45c311a060847455c9667f89620a555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c78d7780cfe71b5dd5de818108066b6"><td class="memItemLeft" align="right" valign="top">uip_ipaddr_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a02102.html#ga3c78d7780cfe71b5dd5de818108066b6">servreg_hack_lookup</a> (servreg_hack_id_t service_id)</td></tr>
<tr class="memdesc:ga3c78d7780cfe71b5dd5de818108066b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the IP address of a node offering a service.  <a href="#ga3c78d7780cfe71b5dd5de818108066b6">More...</a><br/></td></tr>
<tr class="separator:ga3c78d7780cfe71b5dd5de818108066b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This application is a quick'n'dirty hack for registering, disseminating, and looking up services. </p>
<p>A service is identified by an 8-bit integer between 1 and 255. Integers below 128 are reserved for system services.</p>
<p>A service is registered with the function <a class="el" href="a02102.html#gaa701fca1c0fc599727823984af573d47" title="Register that this node provides a service. ">servreg_hack_register()</a>. Registered services will be transmitted to all neighbors that run the servreg-hack application. These will in turn resend the registration to their neighbors.</p>
<p>Services from neighbors are stored in a local table. Services stored in the table can be looked up using a combination of the servreg_hack_list() and servreg_hack_item_match() functions. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gabef71690646b8e6eebafc9e3d606d15d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void servreg_hack_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize and start the servreg-hack application. </p>
<p>This function initializes and starts the servreg-hack application and daemon. </p>

<p>Definition at line <a class="el" href="a00371_source.html#l00119">119</a> of file <a class="el" href="a00371_source.html">servreg-hack.c</a>.</p>

<p>References <a class="el" href="a00621_source.html#l00066">list_init()</a>, <a class="el" href="a00627_source.html#l00052">memb_init()</a>, <a class="el" href="a01725_source.html#l00186">NULL</a>, and <a class="el" href="a00927_source.html#l00099">process_start()</a>.</p>

<p>Referenced by <a class="el" href="a00371_source.html#l00189">servreg_hack_lookup()</a>, and <a class="el" href="a00371_source.html#l00132">servreg_hack_register()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf45c311a060847455c9667f89620a555"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uip_ipaddr_t * servreg_hack_item_address </td>
          <td>(</td>
          <td class="paramtype">servreg_hack_item_t *&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the IP address for a list item. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>The list item </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The IP address <pre class="fragment">        This function is used when iterating through the list
        of registered services.</pre> </dd></dl>

<p>Definition at line <a class="el" href="a00371_source.html#l00183">183</a> of file <a class="el" href="a00371_source.html">servreg-hack.c</a>.</p>

<p>Referenced by <a class="el" href="a00371_source.html#l00189">servreg_hack_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7c40865ba46488d455fa4fb211da35cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">servreg_hack_id_t servreg_hack_item_id </td>
          <td>(</td>
          <td class="paramtype">servreg_hack_item_t *&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the service ID for a list item. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>The list item </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The service ID for a list item <pre class="fragment">        This function is used when iterating through the list
        of registered services.</pre> </dd></dl>

<p>Definition at line <a class="el" href="a00371_source.html#l00177">177</a> of file <a class="el" href="a00371_source.html">servreg-hack.c</a>.</p>

<p>Referenced by <a class="el" href="a00371_source.html#l00189">servreg_hack_lookup()</a>, and <a class="el" href="a00371_source.html#l00132">servreg_hack_register()</a>.</p>

</div>
</div>
<a class="anchor" id="gae25c571b28dac133c74c41347b225b30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">servreg_hack_item_t * servreg_hack_list_head </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the list of services provided by neighbors. </p>
<dl class="section return"><dt>Returns</dt><dd>The list of services <pre class="fragment">        This function returns a list of services registered by
        other nodes. To find a specific service, the caller
        needs to iterate through the list and check each list
        item with the servreg_hack_item_match() function.</pre> </dd></dl>

<p>Definition at line <a class="el" href="a00371_source.html#l00170">170</a> of file <a class="el" href="a00371_source.html">servreg-hack.c</a>.</p>

<p>References <a class="el" href="a00621_source.html#l00083">list_head()</a>.</p>

<p>Referenced by <a class="el" href="a00371_source.html#l00189">servreg_hack_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3c78d7780cfe71b5dd5de818108066b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uip_ipaddr_t * servreg_hack_lookup </td>
          <td>(</td>
          <td class="paramtype">servreg_hack_id_t&#160;</td>
          <td class="paramname"><em>service_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the IP address of a node offering a service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">service_id</td><td>The service ID of the service </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the IP address of the node, or NULL if the service was not known <pre class="fragment">        This function returns the address of the node offering
        a specific service. If the service is not known, the
        function returns NULL. If there are more than one nodes
        offering the service, this function returns the address
        of the node that most recently announced its service.

        To get a list of all nodes offering a specific service,
        use the servreg_hack_list_head() function to get the
        full list of offered services.</pre> </dd></dl>

<p>Definition at line <a class="el" href="a00371_source.html#l00189">189</a> of file <a class="el" href="a00371_source.html">servreg-hack.c</a>.</p>

<p>References <a class="el" href="a00621_source.html#l00325">list_item_next()</a>, <a class="el" href="a01725_source.html#l00186">NULL</a>, <a class="el" href="a00371_source.html#l00119">servreg_hack_init()</a>, <a class="el" href="a00371_source.html#l00183">servreg_hack_item_address()</a>, <a class="el" href="a00371_source.html#l00177">servreg_hack_item_id()</a>, and <a class="el" href="a00371_source.html#l00170">servreg_hack_list_head()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa701fca1c0fc599727823984af573d47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void servreg_hack_register </td>
          <td>(</td>
          <td class="paramtype">servreg_hack_id_t&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uip_ipaddr_t *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register that this node provides a service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">service_id</td><td>The 8-bit ID for the service </td></tr>
    <tr><td class="paramname">addr</td><td>The address associated with the service <pre class="fragment">        This function is used to register a
        service. Registering a service means that other nodes
        in the network will become aware that this node
        provides this service. The servreg-hack application
        does not specify what this service means, nor does it
        provide any mechanism by which the service can be
        reached: this is up to the application that uses the
        servreg-hack application.</pre> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00371_source.html#l00132">132</a> of file <a class="el" href="a00371_source.html">servreg-hack.c</a>.</p>

<p>References <a class="el" href="a00915_source.html#l00177">etimer_set()</a>, <a class="el" href="a00621_source.html#l00083">list_head()</a>, <a class="el" href="a00621_source.html#l00325">list_item_next()</a>, <a class="el" href="a00621_source.html#l00165">list_push()</a>, <a class="el" href="a00627_source.html#l00059">memb_alloc()</a>, <a class="el" href="a01725_source.html#l00186">NULL</a>, <a class="el" href="a00928_source.html#l00426">PROCESS_CONTEXT_BEGIN</a>, <a class="el" href="a00928_source.html#l00440">PROCESS_CONTEXT_END</a>, <a class="el" href="a00635_source.html#l00047">random_rand()</a>, <a class="el" href="a00371_source.html#l00119">servreg_hack_init()</a>, <a class="el" href="a00371_source.html#l00177">servreg_hack_item_id()</a>, <a class="el" href="a00938_source.html#l00064">timer_set()</a>, and <a class="el" href="a00701_source.html#l01026">uip_ipaddr_copy</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Nov 30 2014 09:59:03 for Contiki 3.x by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
