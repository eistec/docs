<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Messaging / IPC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riot-logo.svg"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">The friendly Operating System for the Internet of Things</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__core__msg.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Messaging / IPC<div class="ingroups"><a class="el" href="group__core.html">Kernel</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Messaging API for inter process communication.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:msg_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msg_8h.html">msg.h</a></td></tr>
<tr class="memdesc:msg_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Messaging API for inter process communication. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmsg.html">msg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes a message object which can be sent between threads.  <a href="structmsg.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gadba0f57bc141ce3a7ec95fbd4bf26429"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gadba0f57bc141ce3a7ec95fbd4bf26429"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#gadba0f57bc141ce3a7ec95fbd4bf26429">KERNEL_PID_ISR</a>&#160;&#160;&#160;(<a class="el" href="group__core__util.html#ga8328107b84cbf548fa267bffd8a0496c">KERNEL_PID_LAST</a> + 1)</td></tr>
<tr class="memdesc:gadba0f57bc141ce3a7ec95fbd4bf26429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value of <a class="el" href="structmsg.html#a9592387d64d8bc4339eb8c9e6e8c4bd7" title="PID of sending thread. ">msg_t::sender_pid</a> if the sender was an interrupt service routine. <br /></td></tr>
<tr class="separator:gadba0f57bc141ce3a7ec95fbd4bf26429"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga73bee72a574e88c8c492d6ae28c84fd6"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structmsg.html">msg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a></td></tr>
<tr class="memdesc:ga73bee72a574e88c8c492d6ae28c84fd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes a message object which can be sent between threads.  <a href="#ga73bee72a574e88c8c492d6ae28c84fd6">More...</a><br /></td></tr>
<tr class="separator:ga73bee72a574e88c8c492d6ae28c84fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac5347725c3d203ac72604c0ab8b7d6d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#gac5347725c3d203ac72604c0ab8b7d6d8">msg_send</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m, <a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a> target_pid)</td></tr>
<tr class="memdesc:gac5347725c3d203ac72604c0ab8b7d6d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message.  <a href="#gac5347725c3d203ac72604c0ab8b7d6d8">More...</a><br /></td></tr>
<tr class="separator:gac5347725c3d203ac72604c0ab8b7d6d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99264bd4f263fa2b478308c1f7983c10"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga99264bd4f263fa2b478308c1f7983c10">msg_try_send</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m, <a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a> target_pid)</td></tr>
<tr class="memdesc:ga99264bd4f263fa2b478308c1f7983c10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message.  <a href="#ga99264bd4f263fa2b478308c1f7983c10">More...</a><br /></td></tr>
<tr class="separator:ga99264bd4f263fa2b478308c1f7983c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8711110548c90fe5ca82215e89bb83dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga8711110548c90fe5ca82215e89bb83dd">msg_send_to_self</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m)</td></tr>
<tr class="memdesc:ga8711110548c90fe5ca82215e89bb83dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the current thread.  <a href="#ga8711110548c90fe5ca82215e89bb83dd">More...</a><br /></td></tr>
<tr class="separator:ga8711110548c90fe5ca82215e89bb83dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2762c096056c5eac7ffe38c8727e033a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga2762c096056c5eac7ffe38c8727e033a">msg_send_int</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m, <a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a> target_pid)</td></tr>
<tr class="memdesc:ga2762c096056c5eac7ffe38c8727e033a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send message from interrupt.  <a href="#ga2762c096056c5eac7ffe38c8727e033a">More...</a><br /></td></tr>
<tr class="separator:ga2762c096056c5eac7ffe38c8727e033a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77476ad20575d236516ec0acb0bdabd1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga77476ad20575d236516ec0acb0bdabd1">msg_sent_by_int</a> (const <a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m)</td></tr>
<tr class="memdesc:ga77476ad20575d236516ec0acb0bdabd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if the message was sent inside an ISR.  <a href="#ga77476ad20575d236516ec0acb0bdabd1">More...</a><br /></td></tr>
<tr class="separator:ga77476ad20575d236516ec0acb0bdabd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3e05f08bd71d6f65dc727624c4d5f7a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#gae3e05f08bd71d6f65dc727624c4d5f7a">msg_receive</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m)</td></tr>
<tr class="memdesc:gae3e05f08bd71d6f65dc727624c4d5f7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a message.  <a href="#gae3e05f08bd71d6f65dc727624c4d5f7a">More...</a><br /></td></tr>
<tr class="separator:gae3e05f08bd71d6f65dc727624c4d5f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a5e88bf7d9cadb41e5acf4deb300061"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga0a5e88bf7d9cadb41e5acf4deb300061">msg_try_receive</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m)</td></tr>
<tr class="memdesc:ga0a5e88bf7d9cadb41e5acf4deb300061"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to receive a message.  <a href="#ga0a5e88bf7d9cadb41e5acf4deb300061">More...</a><br /></td></tr>
<tr class="separator:ga0a5e88bf7d9cadb41e5acf4deb300061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01aee21f8554591c7933d4ba05cfe85b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga01aee21f8554591c7933d4ba05cfe85b">msg_send_receive</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m, <a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *reply, <a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a> target_pid)</td></tr>
<tr class="memdesc:ga01aee21f8554591c7933d4ba05cfe85b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message, block until reply received.  <a href="#ga01aee21f8554591c7933d4ba05cfe85b">More...</a><br /></td></tr>
<tr class="separator:ga01aee21f8554591c7933d4ba05cfe85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e7b09dc269eb4847f6e08b9900ffda9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga2e7b09dc269eb4847f6e08b9900ffda9">msg_reply</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *m, <a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *reply)</td></tr>
<tr class="memdesc:ga2e7b09dc269eb4847f6e08b9900ffda9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replies to a message.  <a href="#ga2e7b09dc269eb4847f6e08b9900ffda9">More...</a><br /></td></tr>
<tr class="separator:ga2e7b09dc269eb4847f6e08b9900ffda9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90d8645ba6c1eca6ace05e369b07ce5b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core__msg.html#ga90d8645ba6c1eca6ace05e369b07ce5b">msg_init_queue</a> (<a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *array, int num)</td></tr>
<tr class="memdesc:ga90d8645ba6c1eca6ace05e369b07ce5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the current thread's message queue.  <a href="#ga90d8645ba6c1eca6ace05e369b07ce5b">More...</a><br /></td></tr>
<tr class="separator:ga90d8645ba6c1eca6ace05e369b07ce5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Messaging API for inter process communication. </p>
<p>There are two ways to use the IPC Messaging system of RIOT. The default is synchronous messaging. In this manner, messages are either dropped when the receiver is not waiting and the message was sent non-blocking, or will be delivered immediately when the receiver calls <a class="el" href="group__core__msg.html#gae3e05f08bd71d6f65dc727624c4d5f7a" title="Receive a message. ">msg_receive(msg_t* m)</a>. To use asynchronous messaging any thread can create its own queue by calling <a class="el" href="group__core__msg.html#ga90d8645ba6c1eca6ace05e369b07ce5b" title="Initialize the current thread&#39;s message queue. ">msg_init_queue(msg_t* array, int num)</a>. Messages sent to a thread with a non full message queue are never dropped * and the sending never blocks. Threads with a full message queue behaves like in synchronous mode. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga73bee72a574e88c8c492d6ae28c84fd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structmsg.html">msg</a>  <a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Describes a message object which can be sent between threads. </p>
<p>User can set type and one of content.ptr and content.value. (content is a union) The meaning of type and the content fields is totally up to the user, the corresponding fields are never read by the kernel. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga90d8645ba6c1eca6ace05e369b07ce5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_init_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the current thread's message queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>Pointer to preallocated array of <code>msg_t</code> structures, must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num</td><td>Number of <code>msg_t</code> structures in array. <b>MUST BE POWER OF TWO!</b></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, if successful </dd>
<dd>
-1, on error </dd></dl>

</div>
</div>
<a class="anchor" id="gae3e05f08bd71d6f65dc727624c4d5f7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive a message. </p>
<p>This function blocks until a message was received.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">m</td><td>Pointer to preallocated <code>msg_t</code> structure, must not be NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1, Function always succeeds or blocks forever. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2e7b09dc269eb4847f6e08b9900ffda9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_reply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>reply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Replies to a message. </p>
<p>Sender must have sent the message with <a class="el" href="group__core__msg.html#ga01aee21f8554591c7933d4ba05cfe85b" title="Send a message, block until reply received. ">msg_send_receive()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>message to reply to, must not be NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">reply</td><td>message that target will get as reply, must not be NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1, if successful </dd>
<dd>
0, on error </dd></dl>

</div>
</div>
<a class="anchor" id="gac5347725c3d203ac72604c0ab8b7d6d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a>&#160;</td>
          <td class="paramname"><em>target_pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message. </p>
<p>(blocking)</p>
<p>This function sends a message to another thread. The <code>msg_t</code> structure has to be allocated (e.g. on the stack) before calling the function and can be freed afterwards. If called from an interrupt, this function will never block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to preallocated <code>msg_t</code> structure, must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target_pid</td><td>PID of target thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1, if sending was successful (message delivered directly or to a queue) </dd>
<dd>
0, if called from ISR and receiver cannot receive the message now (it is not waiting or it's message queue is full) </dd>
<dd>
-1, on error (invalid PID) </dd></dl>

</div>
</div>
<a class="anchor" id="ga2762c096056c5eac7ffe38c8727e033a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_send_int </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a>&#160;</td>
          <td class="paramname"><em>target_pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send message from interrupt. </p>
<p>Will be automatically chosen instead of <a class="el" href="group__core__msg.html#gac5347725c3d203ac72604c0ab8b7d6d8" title="Send a message. ">msg_send()</a> if called from an interrupt/ISR.</p>
<p>The value of <code>m-&gt;sender_pid</code> is set to <a class="el" href="group__core__msg.html#gadba0f57bc141ce3a7ec95fbd4bf26429">KERNEL_PID_ISR</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__core__msg.html#ga77476ad20575d236516ec0acb0bdabd1" title="Test if the message was sent inside an ISR. ">msg_sent_by_int()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to preallocated <a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> structure, must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target_pid</td><td>PID of target thread.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1, if sending was successful </dd>
<dd>
0, if receiver is not waiting and <code>block == 0</code> </dd>
<dd>
-1, on error (invalid PID) </dd></dl>

</div>
</div>
<a class="anchor" id="ga01aee21f8554591c7933d4ba05cfe85b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_send_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a>&#160;</td>
          <td class="paramname"><em>target_pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message, block until reply received. </p>
<p>This function sends a message to <em>target_pid</em> and then blocks until target has sent a reply which is then stored in <em>reply</em>.</p>
<dl class="section note"><dt>Note</dt><dd>CAUTION! Use this function only when receiver is already waiting. If not use simple <a class="el" href="group__core__msg.html#gac5347725c3d203ac72604c0ab8b7d6d8" title="Send a message. ">msg_send()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to preallocated <code>msg_t</code> structure with the message to send, must not be NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">reply</td><td>Pointer to preallocated msg. Reply will be written here, must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target_pid</td><td>The PID of the target process</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1, if successful. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8711110548c90fe5ca82215e89bb83dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_send_to_self </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to the current thread. </p>
<p>Will work only if the thread has a message queue.</p>
<p>Will be automatically chosen instead of <code>msg_send</code> if <code>target_pid</code> == <code>thread_pid</code>. This function never blocks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>pointer to message structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if sending was successful </dd>
<dd>
0 if the thread's message queue is full (or inexistent) </dd></dl>

</div>
</div>
<a class="anchor" id="ga77476ad20575d236516ec0acb0bdabd1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int msg_sent_by_int </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test if the message was sent inside an ISR. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__core__msg.html#ga2762c096056c5eac7ffe38c8727e033a" title="Send message from interrupt. ">msg_send_int()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>The message in question. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>== 0</code> if <em>not</em> sent by an ISR </dd>
<dd>
<code>!= 0</code> if sent by an ISR </dd></dl>

<p>Definition at line <a class="el" href="msg_8h_source.html#l00149">149</a> of file <a class="el" href="msg_8h_source.html">msg.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0a5e88bf7d9cadb41e5acf4deb300061"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_try_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to receive a message. </p>
<p>This function does not block if no message can be received.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">m</td><td>Pointer to preallocated <code>msg_t</code> structure, must not be NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1, if a message was received </dd>
<dd>
-1, otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga99264bd4f263fa2b478308c1f7983c10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int msg_try_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__core__msg.html#ga73bee72a574e88c8c492d6ae28c84fd6">msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__core__util.html#ga8375139300d7cbf23bd8bd89ddddbe84">kernel_pid_t</a>&#160;</td>
          <td class="paramname"><em>target_pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message. </p>
<p>(non-blocking)</p>
<p>This function sends a message to another thread. The <code>msg_t</code> structure has to be allocated (e.g. on the stack) before calling the function and can be freed afterwards. This function will never block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">m</td><td>Pointer to preallocated <code>msg_t</code> structure, must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target_pid</td><td>PID of target thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1, if sending was successful (message delivered directly or to a queue) </dd>
<dd>
0, if receiver is not waiting or has a full message queue </dd>
<dd>
-1, on error (invalid PID) </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 12 2015 15:45:18 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
