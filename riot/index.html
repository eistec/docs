<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>RIOT Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riot-logo.svg"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">The friendly Operating System for the Internet of Things</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RIOT Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>RIOT is an operating system designed for the particular requirements of Internet of Things (IoT) scenarios. This requirements comprise a low memory footprint, high energy efficiency, real-time capabilities, a modular and configurable communication stack, and support for a wide range of low-power devices. RIOT provides a microkernel, utilities like cryptographic libraries, data structures (bloom filters, hash tables, priority queues), or a shell, different network stacks, and support for various microcontrollers, radio drivers, sensors, and configurations for entire platforms, e.g. TelosB or STM32 Discovery Boards.</p>
<p>The microkernel itself comprises thread management, a priority-based scheduler, a powerful API for inter-process communication (IPC), a system timer, and mutexes.</p>
<p>In order to build an application or library with RIOT, you need first to download the source code (<a href="https://github.com/RIOT-OS/RIOT/wiki/Introduction#wiki-getting-the-source-code">Getting the source code</a>). This contains - besides the before mentioned features - also some example applications (located in the <code>examples</code> subdirectory) and a sample Makefile you may use for your own project. This Makefile template shows you how to compile and link your application against RIOT (<a href="https://github.com/RIOT-OS/RIOT/wiki/Introduction#wiki-compiling-riot">Compiling RIOT</a>).</p>
<p>If you want to use RIOT directly with your embedded platform, you need to install the corresponding toolchain for the deployed microcontroller (<a href="https://github.com/RIOT-OS/RIOT/wiki/Introduction#wiki-platforms-based-on-arm">ARM based platforms</a>, <a href="https://github.com/RIOT-OS/RIOT/wiki/Introduction#wiki-platforms-based-on-ti-msp430">TI MSP430 based platforms</a>).</p>
<h3>Native RIOT - Run RIOT on your PC!</h3>
<p>As a special platform, you will find a CPU and board called <code>native</code> in the repository. This target allows you to run RIOT as a process on Linux on most supported hardware platforms. Just set CPU and BOARD to <code>native</code> in your application's Makefile, call <code>make</code>, and execute the resulting elf-file. Further documentation about the native port can be found in <code>cpu/native/README</code>.</p>
<h2><a class="anchor" id="structure"></a>
Structure</h2>
<p>The RIOT repository contains the following ten subdirectories:</p><ul>
<li>boards</li>
<li>core</li>
<li>cpu</li>
<li>dist</li>
<li>doc</li>
<li>drivers</li>
<li>examples</li>
<li>pkg</li>
<li>sys</li>
<li>tests</li>
</ul>
<p>The <code>boards</code> directory provides the configurations and initialization code for supported IoT platforms. In <code>core</code> you can find the kernel, while <code>cpu</code> comprises microcontroller specific implementations like startup and exception handling code. The directory <code>dist</code> contains a template for an application's Makefile and external utilities like the terminal program <code>pyterm</code> or a script to build your own toolchain for ARM microcontrollers. Not very surprisingly you will find the (doxygen) documentation in <code>doc</code> and peripheral driver code in <code>drivers</code>. The <code>examples</code> directory provides some exemplary applications, <code>pkg</code> includes Makefiles to integrate external libraries into RIOT, and <code>sys</code> system libraries as well as the implementation of the network stacks which are located in <code>sys/net</code>. Finally, the subdirectory <code>tests</code> contains test applications, including also a few expect scripts to automatically validate some of them.</p>
<h1><a class="anchor" id="features"></a>
Special features</h1>
<h4>The build system</h4>
<p>RIOT uses GNU make as build system. The simplest way to compile and link a application (application or library) with RIOT, is to set up a Makefile providing at least the following variables:</p><ul>
<li>APPLICATION</li>
<li>BOARD</li>
<li>RIOTBASE</li>
</ul>
<p>and an instruction to include the <code>Makefile.include</code>, located in RIOT's root directory. <code>APPLICATION</code> should contain the (unique) name of your application, <code>BOARD</code> specifies the platform the application should be built for by default, and <code>RIOTBASE</code> specifies the path to your copy of the RIOT repository (note, that you may want to use <code></code> here, to give a relative path). You can use Make's <code>?=</code> operator in order to allow overwriting variables from the command line. For example, you can easily specify the target platform, using the sample Makefile, by invoking make like this:</p>
<div class="fragment"><div class="line">make BOARD=telosb</div>
</div><!-- fragment --><p>Besides typical targets like <code>clean</code>, <code>all</code>, or <code>doc</code>, RIOT provides the special targets <code>flash</code> and <code>term</code> to invoke the configured flashing and terminal tools for the specified platform. These targets use the variable <code>PORT</code> for the serial communication to the device. Neither this variable nor the targets <code>flash</code> and <code>term</code> are mandatory for the native port.</p>
<p>Some RIOT directories contain special Makefiles like <code>Makefile.base</code>, <code>Makefile.include</code> or <code>Makefile.dep</code>. The first one can be included into other Makefiles to define some standard targets. The files called <code>Makefile.include</code> are used in <code>boards</code> and <code>cpu</code> to append target specific information to variables like <code>INCLUDES</code>, setting the include paths. <code>Makefile.dep</code> serves to define dependencies.</p>
<h4>Including modules</h4>
<p>By default a RIOT application comprises only the applications' code itself, the kernel, and platform specific code. In order to use additional modules, such as a particular device driver or a system library, you have to append the modules' names to the USEMODULE variable. For example, to build a application using the SHT11 temperature sensor and 6LoWPAN network stack, your Makefile needs to contain these lines: </p><div class="fragment"><div class="line">USEMODULE += sht11</div>
<div class="line">USEMODULE += sixlowpan</div>
</div><!-- fragment --><p> To contribute a new module to RIOT, your module's Makefile needs to set the variable <code>MODULE</code> to a unique name. If the module depends on other modules, this information needs to be added to RIOT's <code>Makefile.dep</code>.</p>
<h4>The main function</h4>
<p>After the board is initialized, RIOT starts two threads: the idle thread and the main thread. The idle thread has the lowest priority and will run, whenever no other thread is ready to run. It will automatically use the lowest possible power mode for the device. The main thread - configured with a default priority that is right in the middle between the lowest and the highest available priority - is the first thread that runs and calls the main function. This function needs to be defined by the application.</p>
<h4>Choosing the right stack size</h4>
<p>Choosing the right stack size for a new thread is not an easy, but a very crucial task. Since memory is usually a scarce resource in IoT scenarios, one most be careful not to assign too much stack to a single thread. However, if you allocate too little memory for a stack, your application will probably crash. The minimum stack size depends also on some RIOT internal structs and is hardware dependent. In order to help developers finding the right stack size, RIOT defines some typical stack sizes in <code>cpu-conf.</code> (which should be provided by the implementation for all supported MCUs). The constants for these stack sizes are</p>
<ul>
<li><code>KERNEL_CONF_STACKSIZE_IDLE</code></li>
<li><code>KERNEL_CONF_STACKSIZE_DEFAULT</code></li>
<li><code>KERNEL_CONF_STACKSIZE_PRINTF</code></li>
<li><code>KERNEL_CONF_STACKSIZE_MAIN</code></li>
</ul>
<p>and can be used by including <code><a class="el" href="kernel_8h.html" title="Kernel compile time configuration. ">kernel.h</a></code>. ARM based platforms additionally define <code>KERNEL_CONF_STACKSIZE_PRINTF_FLOAT</code>, because newlibs printf implementation uses more memory for printing floating point numbers.</p>
<p><code>KERNEL_CONF_STACKSIZE_IDLE</code> is the stack size for the idle thread and probably the smallest sensible stack size. <code>KERNEL_CONF_STACKSIZE_DEFAULT</code> is a default size for any typical thread, <em>not</em> using printf. <code>KERNEL_CONF_STACKSIZE_PRINTF</code> defines additional stack space needed if the thread needs to call printf (which requires additional memory when using newlib). <code>KERNEL_CONF_STACKSIZE_MAIN</code> is the stack size for the main thread and probably a good size for your application. (Note, that on most non-newlib dependent platforms this will probably equal <code>KERNEL_CONF_STACKSIZE_DEFAULT</code>.</p>
<h4>The IPC</h4>
<p>Like any microkernel system, RIOT has an IPC API that enables data exchange between modules or a single module and the kernel. This API is documented in the <a href="http://riot-os.org/api/">doxygen documentation</a>. The IPC can be used in several ways, such as synchronous or asynchronous, blocking or non-blocking, with or without a message queue. In the default case, a thread does not have a message queue. Hence, messages sent in a non-blocking manner are lost, when the target thread is not in receive mode. A thread may set up a message queue using the <a href="http://riot-os.org/api/group__kernel__msg.html">corresponding function</a>, but has to provide the memory for this queue itself.</p>
<h4>Auto-init</h4>
<p>Most modules require initialization before they can be used. In some cases the initialization function does not require a parameter. For these modules you might use the auto-init feature by adding a line like ``` USEMODULE += auto_init ``` to your Makefile. Auto-init calls all module initialization functions with a <code>void</code> parameter just before the main thread gets executed.</p>
<h4>The transceiver module</h4>
<p>The transceiver module is an abstraction layer and multiplexer between the network stack and the radio driver. It runs in a single thread with the PID <code>transceiver_pid</code>. It provides an IPC interface that enables to configure and use available radio drivers, e.g. setting the radio channel or sending a packet. A thread may also register at the transceiver module, in order to get notified whenever a packet for a particular radio transceiver is received. The notification message contains a pointer to the packet struct. After processing the packet, the registered thread needs to decrease this struct's member <code>processing</code> which acts as a semaphore for the packet's memory buffer.</p>
<h1><a class="anchor" id="info_sec"></a>
Community</h1>
<p>Whether you are looking for help with writing an application for RIOT, want to learn more about it, or just stay in the loop you are invited to join the RIOT-users mailing list. For developers who want to participate and contribute to the kernel development or integrate new MCU and platform support the <a href="http://lists.riot-os.org/mailman/listinfo/devel">RIOT-devel mailing list</a> is the right place. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 12 2015 15:45:28 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
