<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>SPI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riot-logo.svg"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">The friendly Operating System for the Internet of Things</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__driver__periph__spi.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SPI<div class="ingroups"><a class="el" href="group__drivers.html">Drivers</a> &raquo; <a class="el" href="group__driver__periph.html">Peripheral drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Low-level SPI peripheral driver.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:spi_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_8h.html">spi.h</a></td></tr>
<tr class="memdesc:spi_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level SPI peripheral driver interface definitions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga4c4c3893bd4169998937dd7199875d64"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4c4c3893bd4169998937dd7199875d64"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> </td></tr>
<tr class="memdesc:ga4c4c3893bd4169998937dd7199875d64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition available SPI devices. <br /></td></tr>
<tr class="separator:ga4c4c3893bd4169998937dd7199875d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaea66d68397aca71e7afcbac716a993b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#gaaea66d68397aca71e7afcbac716a993b">spi_conf_t</a> { <a class="el" href="group__driver__periph__spi.html#ggaaea66d68397aca71e7afcbac716a993ba0b33f1423519b20ca179bcdd6922523a">SPI_CONF_FIRST_RISING</a> = 0, 
<a class="el" href="group__driver__periph__spi.html#ggaaea66d68397aca71e7afcbac716a993bae4a22a9b256ca8c9b6a92128ca8688f5">SPI_CONF_SECOND_RISING</a>, 
<a class="el" href="group__driver__periph__spi.html#ggaaea66d68397aca71e7afcbac716a993ba1f201c41620be538ae216bcf857f64dc">SPI_CONF_FIRST_FALLING</a>, 
<a class="el" href="group__driver__periph__spi.html#ggaaea66d68397aca71e7afcbac716a993ba68342f8c5d1ea7a82da28edda31cf1e7">SPI_CONF_SECOND_FALLING</a>
 }</td></tr>
<tr class="memdesc:gaaea66d68397aca71e7afcbac716a993b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SPI mode is defined by the four possible combinations of clock polarity and clock phase.  <a href="group__driver__periph__spi.html#gaaea66d68397aca71e7afcbac716a993b">More...</a><br /></td></tr>
<tr class="separator:gaaea66d68397aca71e7afcbac716a993b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga283b491f1676c002b9dbe996be76f9f3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#ga283b491f1676c002b9dbe996be76f9f3">spi_speed_t</a> { <br />
&#160;&#160;<a class="el" href="group__driver__periph__spi.html#gga283b491f1676c002b9dbe996be76f9f3a6fd94879d03dedbdd0f1183e542e8bdf">SPI_SPEED_100KHZ</a> = 0, 
<a class="el" href="group__driver__periph__spi.html#gga283b491f1676c002b9dbe996be76f9f3a832f2380bc9638a3dbd725a5b65b8218">SPI_SPEED_400KHZ</a>, 
<a class="el" href="group__driver__periph__spi.html#gga283b491f1676c002b9dbe996be76f9f3a5545cd9f34dcdf737401df243851c9a8">SPI_SPEED_1MHZ</a>, 
<a class="el" href="group__driver__periph__spi.html#gga283b491f1676c002b9dbe996be76f9f3a946f90ba2c2895632e189c1867e5987c">SPI_SPEED_5MHZ</a>, 
<br />
&#160;&#160;<a class="el" href="group__driver__periph__spi.html#gga283b491f1676c002b9dbe996be76f9f3a552c4a8ef650e921e471dd23e6b7a45b">SPI_SPEED_10MHZ</a>
<br />
 }</td></tr>
<tr class="memdesc:ga283b491f1676c002b9dbe996be76f9f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a set of pre-defined SPI clock speeds.  <a href="group__driver__periph__spi.html#ga283b491f1676c002b9dbe996be76f9f3">More...</a><br /></td></tr>
<tr class="separator:ga283b491f1676c002b9dbe996be76f9f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga337b48d1d6ebb31271704f57f539adf3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#ga337b48d1d6ebb31271704f57f539adf3">spi_init_master</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev, <a class="el" href="group__driver__periph__spi.html#gaaea66d68397aca71e7afcbac716a993b">spi_conf_t</a> conf, <a class="el" href="group__driver__periph__spi.html#ga283b491f1676c002b9dbe996be76f9f3">spi_speed_t</a> speed)</td></tr>
<tr class="memdesc:ga337b48d1d6ebb31271704f57f539adf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the given SPI device to work in master mode.  <a href="#ga337b48d1d6ebb31271704f57f539adf3">More...</a><br /></td></tr>
<tr class="separator:ga337b48d1d6ebb31271704f57f539adf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad279df0734df4c3fdd7517473f798a1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#gad279df0734df4c3fdd7517473f798a1e">spi_init_slave</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev, <a class="el" href="group__driver__periph__spi.html#gaaea66d68397aca71e7afcbac716a993b">spi_conf_t</a> conf, char(*cb)(char data))</td></tr>
<tr class="memdesc:gad279df0734df4c3fdd7517473f798a1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the given SPI device to work in slave mode.  <a href="#gad279df0734df4c3fdd7517473f798a1e">More...</a><br /></td></tr>
<tr class="separator:gad279df0734df4c3fdd7517473f798a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a6977a2b04b9abc6581f4839274e92e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#ga2a6977a2b04b9abc6581f4839274e92e">spi_conf_pins</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev)</td></tr>
<tr class="memdesc:ga2a6977a2b04b9abc6581f4839274e92e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure SCK, MISO and MOSI pins for the given SPI device.  <a href="#ga2a6977a2b04b9abc6581f4839274e92e">More...</a><br /></td></tr>
<tr class="separator:ga2a6977a2b04b9abc6581f4839274e92e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d784d93d3ddc41c0022b548f685960c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#ga5d784d93d3ddc41c0022b548f685960c">spi_transfer_byte</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev, char out, char *in)</td></tr>
<tr class="memdesc:ga5d784d93d3ddc41c0022b548f685960c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer one byte on the given SPI bus.  <a href="#ga5d784d93d3ddc41c0022b548f685960c">More...</a><br /></td></tr>
<tr class="separator:ga5d784d93d3ddc41c0022b548f685960c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32bf6ff0c8402895b17a6ebff68876a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#ga32bf6ff0c8402895b17a6ebff68876a4">spi_transfer_bytes</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev, char *out, char *in, unsigned int length)</td></tr>
<tr class="memdesc:ga32bf6ff0c8402895b17a6ebff68876a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer a number bytes on the given SPI bus.  <a href="#ga32bf6ff0c8402895b17a6ebff68876a4">More...</a><br /></td></tr>
<tr class="separator:ga32bf6ff0c8402895b17a6ebff68876a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb0dce468d58be40e9e2c7060ce9f1cd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#gaeb0dce468d58be40e9e2c7060ce9f1cd">spi_transfer_reg</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev, uint8_t reg, char out, char *in)</td></tr>
<tr class="memdesc:gaeb0dce468d58be40e9e2c7060ce9f1cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer one byte to/from a given register address.  <a href="#gaeb0dce468d58be40e9e2c7060ce9f1cd">More...</a><br /></td></tr>
<tr class="separator:gaeb0dce468d58be40e9e2c7060ce9f1cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c8efb561ece72d9aca925130c9c9c2f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#ga2c8efb561ece72d9aca925130c9c9c2f">spi_transfer_regs</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev, uint8_t reg, char *out, char *in, unsigned int length)</td></tr>
<tr class="memdesc:ga2c8efb561ece72d9aca925130c9c9c2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer a number of bytes from/to a given register address.  <a href="#ga2c8efb561ece72d9aca925130c9c9c2f">More...</a><br /></td></tr>
<tr class="separator:ga2c8efb561ece72d9aca925130c9c9c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab215770ba6563a4d68ba644747e6cb40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#gab215770ba6563a4d68ba644747e6cb40">spi_transmission_begin</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev, char reset_val)</td></tr>
<tr class="memdesc:gab215770ba6563a4d68ba644747e6cb40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell the SPI driver that a new transaction was started.  <a href="#gab215770ba6563a4d68ba644747e6cb40">More...</a><br /></td></tr>
<tr class="separator:gab215770ba6563a4d68ba644747e6cb40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab43f285230613ae8ec91c3bb9aa76a0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#gab43f285230613ae8ec91c3bb9aa76a0c">spi_poweron</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev)</td></tr>
<tr class="memdesc:gab43f285230613ae8ec91c3bb9aa76a0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Power on the given SPI device.  <a href="#gab43f285230613ae8ec91c3bb9aa76a0c">More...</a><br /></td></tr>
<tr class="separator:gab43f285230613ae8ec91c3bb9aa76a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabfd2a8886a484f3be3492936c64849b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__driver__periph__spi.html#gabfd2a8886a484f3be3492936c64849b3">spi_poweroff</a> (<a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a> dev)</td></tr>
<tr class="memdesc:gabfd2a8886a484f3be3492936c64849b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Power off the given SPI device.  <a href="#gabfd2a8886a484f3be3492936c64849b3">More...</a><br /></td></tr>
<tr class="separator:gabfd2a8886a484f3be3492936c64849b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Low-level SPI peripheral driver. </p>
<p>The current design of this interface targets implementations that use the SPI in blocking mode.</p>
<p>TODO: add means for asynchronous SPI usage </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gaaea66d68397aca71e7afcbac716a993b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__driver__periph__spi.html#gaaea66d68397aca71e7afcbac716a993b">spi_conf_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The SPI mode is defined by the four possible combinations of clock polarity and clock phase. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggaaea66d68397aca71e7afcbac716a993ba0b33f1423519b20ca179bcdd6922523a"></a>SPI_CONF_FIRST_RISING&#160;</td><td class="fielddoc">
<p>first data bit is transacted on the first rising SCK edge </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggaaea66d68397aca71e7afcbac716a993bae4a22a9b256ca8c9b6a92128ca8688f5"></a>SPI_CONF_SECOND_RISING&#160;</td><td class="fielddoc">
<p>first data bit is transacted on the second rising SCK edge </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggaaea66d68397aca71e7afcbac716a993ba1f201c41620be538ae216bcf857f64dc"></a>SPI_CONF_FIRST_FALLING&#160;</td><td class="fielddoc">
<p>first data bit is transacted on the first falling SCK edge </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggaaea66d68397aca71e7afcbac716a993ba68342f8c5d1ea7a82da28edda31cf1e7"></a>SPI_CONF_SECOND_FALLING&#160;</td><td class="fielddoc">
<p>first data bit is transacted on the second falling SCK edge </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="spi_8h_source.html#l00059">59</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga283b491f1676c002b9dbe996be76f9f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__driver__periph__spi.html#ga283b491f1676c002b9dbe996be76f9f3">spi_speed_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define a set of pre-defined SPI clock speeds. </p>
<p>The actual speed of the bus can vary to some extend, as the combination of CPU clock and available prescale values on certain platforms may not make the exact values possible. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga283b491f1676c002b9dbe996be76f9f3a6fd94879d03dedbdd0f1183e542e8bdf"></a>SPI_SPEED_100KHZ&#160;</td><td class="fielddoc">
<p>drive the SPI bus with 100KHz </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga283b491f1676c002b9dbe996be76f9f3a832f2380bc9638a3dbd725a5b65b8218"></a>SPI_SPEED_400KHZ&#160;</td><td class="fielddoc">
<p>drive the SPI bus with 400KHz </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga283b491f1676c002b9dbe996be76f9f3a5545cd9f34dcdf737401df243851c9a8"></a>SPI_SPEED_1MHZ&#160;</td><td class="fielddoc">
<p>drive the SPI bus with 1MHz </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga283b491f1676c002b9dbe996be76f9f3a946f90ba2c2895632e189c1867e5987c"></a>SPI_SPEED_5MHZ&#160;</td><td class="fielddoc">
<p>drive the SPI bus with 5MHz </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga283b491f1676c002b9dbe996be76f9f3a552c4a8ef650e921e471dd23e6b7a45b"></a>SPI_SPEED_10MHZ&#160;</td><td class="fielddoc">
<p>drive the SPI bus with 10MHz </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="spi_8h_source.html#l00072">72</a> of file <a class="el" href="spi_8h_source.html">spi.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga2a6977a2b04b9abc6581f4839274e92e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spi_conf_pins </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure SCK, MISO and MOSI pins for the given SPI device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device to use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="ga337b48d1d6ebb31271704f57f539adf3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spi_init_master </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#gaaea66d68397aca71e7afcbac716a993b">spi_conf_t</a>&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga283b491f1676c002b9dbe996be76f9f3">spi_speed_t</a>&#160;</td>
          <td class="paramname"><em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the given SPI device to work in master mode. </p>
<p>In master mode the SPI device is configured to control the SPI bus. This means the device will start and end all communication on the bus and control the CLK line. For transferring data on the bus the below defined transfer functions should be used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device to initialize </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conf</td><td>Mode of clock phase and clock polarity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">speed</td><td>desired clock speed for driving the SPI bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-1 on unavailable speed value </dd>
<dd>
-2 on other errors </dd></dl>

</div>
</div>
<a class="anchor" id="gad279df0734df4c3fdd7517473f798a1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spi_init_slave </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#gaaea66d68397aca71e7afcbac716a993b">spi_conf_t</a>&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char(*)(char data)&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the given SPI device to work in slave mode. </p>
<p>In slave mode the SPI device is purely reacting to the bus. Transaction will be started and ended by a connected SPI master. When a byte is received, the callback is called in interrupt context with this byte as argument. The return byte of the callback is transferred to the master in the next transmission cycle. This interface enables easy implementation of a register based access paradigm for the SPI slave.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>The SPI device to initialize as SPI slave </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conf</td><td>Mode of clock phase and polarity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>callback called every time a byte was received</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
-1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="gabfd2a8886a484f3be3492936c64849b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_poweroff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Power off the given SPI device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device to power off </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab43f285230613ae8ec91c3bb9aa76a0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_poweron </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Power on the given SPI device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device to power on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5d784d93d3ddc41c0022b548f685960c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spi_transfer_byte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transfer one byte on the given SPI bus. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out</td><td>Byte to send out, set NULL if only receiving </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">in</td><td>Byte to read, set NULL if only sending</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes that were transfered </dd>
<dd>
-1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="ga32bf6ff0c8402895b17a6ebff68876a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spi_transfer_bytes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transfer a number bytes on the given SPI bus. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out</td><td>Array of bytes to send, set NULL if only receiving </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">in</td><td>Buffer to receive bytes to, set NULL if only sending </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Number of bytes to transfer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes that were transfered </dd>
<dd>
-1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="gaeb0dce468d58be40e9e2c7060ce9f1cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spi_transfer_reg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transfer one byte to/from a given register address. </p>
<p>This function is a shortcut function for easier handling of register based SPI devices. As many SPI devices use a register based addressing scheme, this function is a convenient short- cut for interfacing with such devices.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reg</td><td>Register address to transfer data to/from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out</td><td>Byte to send, set NULL if only receiving data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">in</td><td>Byte to read, set NULL if only sending</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes that were transfered </dd>
<dd>
-1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="ga2c8efb561ece72d9aca925130c9c9c2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spi_transfer_regs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transfer a number of bytes from/to a given register address. </p>
<p>This function is a shortcut function for easier handling of register based SPI devices. As many SPI devices use a register based addressing scheme, this function is a convenient short- cut for interfacing with such devices.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reg</td><td>Register address to transfer data to/from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">out</td><td>Byte array to send data from, set NULL if only receiving </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">in</td><td>Byte buffer to read into, set NULL if only sending </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Number of bytes to transfer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes that were transfered </dd>
<dd>
-1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="gab215770ba6563a4d68ba644747e6cb40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_transmission_begin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__driver__periph__spi.html#ga4c4c3893bd4169998937dd7199875d64">spi_t</a>&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>reset_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tell the SPI driver that a new transaction was started. </p>
<p>Call only when SPI in slave mode!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>SPI device that is active </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reset_val</td><td>The byte that is send to the master as first byte </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 12 2015 15:45:18 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
