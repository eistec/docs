<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>i586</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riot-logo.svg"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">The friendly Operating System for the Internet of Things</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__x86.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">i586<div class="ingroups"><a class="el" href="group__cpu.html">CPU</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Basic definitions and forwards for x86 boards.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__x86-irq"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86-irq.html">Interrupt handling for i586 boards</a></td></tr>
<tr class="memdesc:group__x86-irq"><td class="mdescLeft">&#160;</td><td class="mdescRight">The entry points for all interrupts on x86 boards. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__x86-multithreading"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86-multithreading.html">i586 multithreading support</a></td></tr>
<tr class="memdesc:group__x86-multithreading"><td class="mdescLeft">&#160;</td><td class="mdescRight">Using multiple threads on x86 boards. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:x86_2include_2cpu_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2include_2cpu_8h.html">x86/include/cpu.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86_2include_2hwtimer__cpu_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2include_2hwtimer__cpu_8h.html">x86/include/hwtimer_cpu.h</a></td></tr>
<tr class="memdesc:x86_2include_2hwtimer__cpu_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Basic definitions for the hwtimer. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__cmos_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__cmos_8h.html">x86_cmos.h</a></td></tr>
<tr class="memdesc:x86__cmos_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions to interact with the CMOS memory of the BIOS. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__hwtimer_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__hwtimer_8h.html">x86_hwtimer.h</a></td></tr>
<tr class="memdesc:x86__hwtimer_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interface of the architecture specific part of the hwtimer module. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__kernel__memory_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__kernel__memory_8h.html">x86_kernel_memory.h</a></td></tr>
<tr class="memdesc:x86__kernel__memory_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Layout of the kernel memory. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__memory_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__memory_8h.html">x86_memory.h</a></td></tr>
<tr class="memdesc:x86__memory_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">The virtual memory management of x86 boards. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__reboot_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__reboot_8h.html">x86_reboot.h</a></td></tr>
<tr class="memdesc:x86__reboot_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rebooting x86 boards. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__registers_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__registers_8h.html">x86_registers.h</a></td></tr>
<tr class="memdesc:x86__registers_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">The various non-general purpose registers of x86 CPUs. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:x86__videoram_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__videoram_8h.html">x86_videoram.h</a></td></tr>
<tr class="memdesc:x86__videoram_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writing to the videoram. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:qemu-i386_2include_2board_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qemu-i386_2include_2board_8h.html">qemu-i386/include/board.h</a></td></tr>
<tr class="memdesc:qemu-i386_2include_2board_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board specific defines for qemu-i386. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:boards_2qemu-i386_2include_2cpu-conf_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="boards_2qemu-i386_2include_2cpu-conf_8h.html">boards/qemu-i386/include/cpu-conf.h</a></td></tr>
<tr class="memdesc:boards_2qemu-i386_2include_2cpu-conf_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">CPU-specific defines for qemu-i386. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae1728319753174eafa7a8fb204ef5fb2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae1728319753174eafa7a8fb204ef5fb2"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>dINT</b> (void)</td></tr>
<tr class="separator:gae1728319753174eafa7a8fb204ef5fb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf4ca0839ccabf5a1b1ebbe964fadd5b8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf4ca0839ccabf5a1b1ebbe964fadd5b8"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>eINT</b> (void)</td></tr>
<tr class="separator:gaf4ca0839ccabf5a1b1ebbe964fadd5b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6cfa323ed48d7276791b7b0d40234494"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86.html#ga6cfa323ed48d7276791b7b0d40234494">x86_hlt</a> (void)</td></tr>
<tr class="memdesc:ga6cfa323ed48d7276791b7b0d40234494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable interrupts and halt forever.  <a href="#ga6cfa323ed48d7276791b7b0d40234494">More...</a><br /></td></tr>
<tr class="separator:ga6cfa323ed48d7276791b7b0d40234494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4da4a4c6c0e0305e3d8ed93527b00e30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86.html#ga4da4a4c6c0e0305e3d8ed93527b00e30">x86_startup</a> (void) <a class="el" href="group__core__internal.html#gaa1728270d73c5d1598de1fd691762eb1">NORETURN</a></td></tr>
<tr class="memdesc:ga4da4a4c6c0e0305e3d8ed93527b00e30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize subsystems and run kernel.  <a href="#ga4da4a4c6c0e0305e3d8ed93527b00e30">More...</a><br /></td></tr>
<tr class="separator:ga4da4a4c6c0e0305e3d8ed93527b00e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa43719e7fdd6563a0712052975b7673"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86.html#gafa43719e7fdd6563a0712052975b7673">x86_init_board</a> (void)</td></tr>
<tr class="memdesc:gafa43719e7fdd6563a0712052975b7673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup board specific hardware and such.  <a href="#gafa43719e7fdd6563a0712052975b7673">More...</a><br /></td></tr>
<tr class="separator:gafa43719e7fdd6563a0712052975b7673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa022f72b8ab7f20f2182618845671331"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x86.html#gaa022f72b8ab7f20f2182618845671331">x86_get_memory_region</a> (uint64_t *start, uint64_t *len, unsigned long *cnt)</td></tr>
<tr class="memdesc:gaa022f72b8ab7f20f2182618845671331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a range of usable physical memory.  <a href="#gaa022f72b8ab7f20f2182618845671331">More...</a><br /></td></tr>
<tr class="separator:gaa022f72b8ab7f20f2182618845671331"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Basic definitions and forwards for x86 boards. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaa022f72b8ab7f20f2182618845671331"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool x86_get_memory_region </td>
          <td>(</td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a range of usable physical memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">start</td><td>Start address of the physical memory region. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">len</td><td>Total length of the physical memory region. One page are 0x1000 bytes. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cnt</td><td>Reentrant pointer. Must be zero on first call. The value is entirely opaque. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true iff there was a memory region set in start and len. false iff there are no more memory regions. The function must not get called again in the latter case.</dd></dl>
<p>Called by <a class="el" href="group__x86.html#ga4da4a4c6c0e0305e3d8ed93527b00e30" title="Initialize subsystems and run kernel. ">x86_startup()</a> before <a class="el" href="group__x86.html#gafa43719e7fdd6563a0712052975b7673" title="Setup board specific hardware and such. ">x86_init_board()</a> gets called.</p>
<p>The memory management is one of the earliest subsystems to be set up. The uart is already configured and usable. The interrupt handling is already set up and you may call <a class="el" href="group__x86-irq.html#gaa8915cafbabacf0e9787e8914525abc8" title="Set callback function for interrupt. ">x86_interrupt_handler_set()</a>.</p>
<p>The function may return unaligned memory. In this case the begin of the region gets rounded up the the next page, and the end gets rounded down. The function may supply low memory regions, which will be ignored. The regions are expected to contain memory that lies inside the elf sections. </p>

</div>
</div>
<a class="anchor" id="ga6cfa323ed48d7276791b7b0d40234494"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void x86_hlt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disable interrupts and halt forever. </p>
<p>This function is the last resort in case of an unrecoverable error. No message will be printed, no nothing. </p>

<p>Definition at line <a class="el" href="x86_2include_2cpu_8h_source.html#l00062">62</a> of file <a class="el" href="x86_2include_2cpu_8h_source.html">x86/include/cpu.h</a>.</p>

</div>
</div>
<a class="anchor" id="gafa43719e7fdd6563a0712052975b7673"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void x86_init_board </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup board specific hardware and such. </p>
<p>Called by <a class="el" href="group__x86.html#ga4da4a4c6c0e0305e3d8ed93527b00e30" title="Initialize subsystems and run kernel. ">x86_startup()</a> after all generic subsystems are activated, and before <a class="el" href="group__core__internal.html#ga0dbe43a64cbf994bf9189e7767f93342" title="Initializes scheduler and creates main and idle task. ">kernel_init()</a> gets called. Interrupts are disabled before, and are expected to be disabled after calling this function. Interrupts may be enabled during the course of this function call.</p>
<p>Probably most of the board specific initialization should be done in <a class="el" href="group__sys__autoinit.html#ga923fd92ea17c7891c288f1ddc135f112" title="Initializes all high level modules that do not require parameters for initialization or uses default ...">auto_init()</a>: </p><ul>
<li>You must not spawn <a class="el" href="group__core__thread.html#ga87c94d383e64a09974fc8665f82a99b3" title="Creates a new thread. ">thread_create()</a> in this function. </li>
<li>The hwtimer is not set up properly at this point of executation. </li>
</ul>

</div>
</div>
<a class="anchor" id="ga4da4a4c6c0e0305e3d8ed93527b00e30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void x86_startup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize subsystems and run kernel. </p>
<p>Called by the board specific startup code. </p><ul>
<li>The .bss has to be cleared before. </li>
<li>The stack has to be set up, probably somewhere in the low memory. </li>
<li>The A20 line has to be activated, because all the code is beyond 1MB. </li>
<li>Paging must be disabled. </li>
<li>The SS, DS, and CS must span the whole 4GB of RAM. </li>
<li>32 bit protected mode must be entered. </li>
<li>Interrupts must be disabled. </li>
</ul>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 12 2015 16:06:57 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
